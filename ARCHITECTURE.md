# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Planning Poker ğŸ—ï¸

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Browser                              â”‚
â”‚                    http://localhost:3001                     â”‚
â”‚                  https://pokerscrum.ru                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Frontend (Nuxt 4)           â”‚
         â”‚   Port: 3001                  â”‚
         â”‚   - Vue 3 Composition API     â”‚
         â”‚   - Pinia State Management    â”‚
         â”‚   - SSR Enabled               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
          HTTP/WS    â”‚    API Requests
          Requests   â”‚    WebSocket
                     â”‚
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Backend (NestJS)            â”‚
         â”‚   Port: 3000                  â”‚
         â”‚   - REST API                  â”‚
         â”‚   - WebSocket Gateway         â”‚
         â”‚   - Prisma ORM                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚    Prisma
                     â”‚
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   MySQL Database              â”‚
         â”‚   Port: 3306                  â”‚
         â”‚   - planning_poker DB         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹

```
User Browser
    â”‚
    â”œâ”€â–º POST /api/game/create
    â”‚       â”‚
    â”‚       â–¼
    â”‚   Backend Controller
    â”‚       â”‚
    â”‚       â”œâ”€â–º Game Service
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â–º Prisma Client
    â”‚       â”‚       â”‚       â”‚
    â”‚       â”‚       â”‚       â–¼
    â”‚       â”‚       â”‚   MySQL DB
    â”‚       â”‚       â”‚       â”‚
    â”‚       â”‚       â”‚       â””â”€â–º INSERT game record
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â–º Return game data
    â”‚       â”‚
    â”‚       â””â”€â–º Response with gameId
    â”‚
    â””â”€â–º Redirect to /game/{gameId}
```

### WebSocket ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ

```
User Browser
    â”‚
    â”œâ”€â–º Connect to ws://localhost:3000
    â”‚       â”‚
    â”‚       â–¼
    â”‚   WebSocket Gateway
    â”‚       â”‚
    â”‚       â”œâ”€â–º Join room (gameId)
    â”‚       â”‚
    â”‚       â”œâ”€â–º Vote event
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â–º Update DB
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â–º Broadcast to room
    â”‚       â”‚
    â”‚       â””â”€â–º All clients receive update
```

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
planning-poker/
â”‚
â”œâ”€â”€ ğŸ“± frontend/                    # Nuxt 4 Application
â”‚   â”œâ”€â”€ pages/                      # Vue pages (auto-routing)
â”‚   â”‚   â”œâ”€â”€ index.vue              # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
â”‚   â”‚   â”œâ”€â”€ create.vue             # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹
â”‚   â”‚   â”œâ”€â”€ rules.vue              # ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°
â”‚   â”‚   â””â”€â”€ game/
â”‚   â”‚       â””â”€â”€ [gameId].vue       # Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¸Ğ³Ñ€Ñ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                 # Vue ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ LanguageSwitcher.vue   # ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ·Ñ‹ĞºĞ°
â”‚   â”‚   â””â”€â”€ ThemeSwitcher.vue      # ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ Ñ‚ĞµĞ¼Ñ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                     # Pinia stores
â”‚   â”‚   â””â”€â”€ game.ts                # State Ğ¸Ğ³Ñ€Ñ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/                # ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ°Ğ±Ğ»Ñ‹
â”‚   â”‚   â”œâ”€â”€ useI18n.ts             # Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚   â””â”€â”€ useTheme.ts            # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ¼Ğ¾Ğ¹
â”‚   â”‚
â”‚   â”œâ”€â”€ locales/                    # ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹
â”‚   â”‚   â”œâ”€â”€ en.ts                  # ĞĞ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹
â”‚   â”‚   â””â”€â”€ ru.ts                  # Ğ ÑƒÑÑĞºĞ¸Ğ¹
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/                     # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ fonts/
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚
â”‚   â”œâ”€â”€ public/                     # ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ .env                        # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ğ½Ğµ Ğ² git)
â”‚   â”œâ”€â”€ .env.example               # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ nuxt.config.ts             # Nuxt ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ package.json               # Dependencies
â”‚   â””â”€â”€ README.md                  # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â”‚
â”œâ”€â”€ âš™ï¸ backend/                     # NestJS Application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.ts                # Entry point
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ app.module.ts          # Root module
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ game/                  # Game module
â”‚   â”‚   â”‚   â”œâ”€â”€ game.controller.ts # REST endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ game.service.ts    # Business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ game.module.ts     # Module definition
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.gateway.ts # WebSocket
â”‚   â”‚   â”‚   â”œâ”€â”€ decks.ts           # Card decks
â”‚   â”‚   â”‚   â””â”€â”€ dto/               # Data Transfer Objects
â”‚   â”‚   â”‚       â”œâ”€â”€ create-game.dto.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ join-game.dto.ts
â”‚   â”‚   â”‚       â””â”€â”€ vote.dto.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ prisma/                # Prisma module
â”‚   â”‚       â”œâ”€â”€ prisma.module.ts
â”‚   â”‚       â””â”€â”€ prisma.service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ prisma/                     # Database
â”‚   â”‚   â”œâ”€â”€ schema.prisma          # DB schema
â”‚   â”‚   â””â”€â”€ migrations/            # Migrations
â”‚   â”‚
â”‚   â”œâ”€â”€ dist/                       # Compiled JS (generated)
â”‚   â”‚
â”‚   â”œâ”€â”€ .env                        # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ğ½Ğµ Ğ² git)
â”‚   â”œâ”€â”€ env.example                # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ nest-cli.json              # NestJS CLI config
â”‚   â”œâ”€â”€ tsconfig.json              # TypeScript config
â”‚   â”œâ”€â”€ package.json               # Dependencies
â”‚   â””â”€â”€ README.md                  # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â”‚
â”œâ”€â”€ ğŸ“š Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ/
â”‚   â”œâ”€â”€ README.md                   # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
â”‚   â”œâ”€â”€ QUICK_START.md             # Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚
â”‚   â”œâ”€â”€ CONFIGURATION_GUIDE.md     # Ğ“Ğ¸Ğ´ Ğ¿Ğ¾ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ CHANGES_SUMMARY.md         # Ğ ĞµĞ·ÑĞ¼Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
â”‚   â”œâ”€â”€ FINAL_SUMMARY.md           # ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ñ€ĞµĞ·ÑĞ¼Ğµ
â”‚   â”œâ”€â”€ DOCUMENTATION_INDEX.md     # Ğ˜Ğ½Ğ´ĞµĞºÑ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ ARCHITECTURE.md            # Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ»
â”‚   â”‚
â”‚   â”œâ”€â”€ PM2_DEPLOYMENT.md          # PM2 Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹
â”‚   â”œâ”€â”€ PM2_CHECKLIST.md           # PM2 Ñ‡ĞµĞºĞ»Ğ¸ÑÑ‚
â”‚   â”œâ”€â”€ PM2_SUMMARY.md             # PM2 Ñ€ĞµĞ·ÑĞ¼Ğµ
â”‚   â”œâ”€â”€ PM2_CHEATSHEET.md          # PM2 ÑˆĞ¿Ğ°Ñ€Ğ³Ğ°Ğ»ĞºĞ°
â”‚   â”‚
â”‚   â””â”€â”€ DEPLOYMENT.md              # Docker Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹
â”‚
â”œâ”€â”€ ğŸš€ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ/
â”‚   â”œâ”€â”€ ecosystem.config.js         # PM2 config
â”‚   â”œâ”€â”€ docker-compose.yml          # Docker Compose
â”‚   â”œâ”€â”€ nginx-config-example.conf   # Nginx example
â”‚   â””â”€â”€ .gitignore                  # Git ignore
â”‚
â””â”€â”€ ğŸ”§ Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹/
    â”œâ”€â”€ prepare-pm2.sh              # ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° PM2 (Linux/macOS)
    â””â”€â”€ prepare-pm2.bat             # ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° PM2 (Windows)
```

---

## ğŸŒ Ğ¡ĞµÑ‚ĞµĞ²Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### Development

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer Machine                      â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Frontend    â”‚â”€â”€â”€â”€â”‚  Backend     â”‚ â”‚
â”‚  â”‚  :3001       â”‚    â”‚  :3000       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚          â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                      â”‚  MySQL       â”‚  â”‚
â”‚                      â”‚  :3306       â”‚  â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production (Ñ Nginx)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Internet                                            â”‚
â”‚                 https://pokerscrum.ru                â”‚
â”‚                          â”‚                           â”‚
â”‚                          â–¼                           â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                   â”‚   Nginx     â”‚                    â”‚
â”‚                   â”‚   :80, :443 â”‚                    â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                          â”‚                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚              â”‚                       â”‚               â”‚
â”‚              â–¼                       â–¼               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚     â”‚  Frontend      â”‚      â”‚  Backend       â”‚      â”‚
â”‚     â”‚  :3001         â”‚      â”‚  :3000         â”‚      â”‚
â”‚     â”‚  (PM2)         â”‚      â”‚  (PM2)         â”‚      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                      â”‚               â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚                               â”‚  MySQL       â”‚       â”‚
â”‚                               â”‚  :3306       â”‚       â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production (Ñ Docker)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Docker Host                                    â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Docker Network: planning-poker-network  â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Frontend      â”‚  â”‚  Backend       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Container     â”‚  â”‚  Container     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  :3001         â”‚  â”‚  :3000         â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                              â”‚          â”‚  â”‚
â”‚  â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                     â”‚  MySQL          â”‚ â”‚  â”‚
â”‚  â”‚                     â”‚  Container      â”‚ â”‚  â”‚
â”‚  â”‚                     â”‚  :3306          â”‚ â”‚  â”‚
â”‚  â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ API Endpoints

### REST API (Backend)

| Method | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| `POST` | `/api/game/create` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ¸Ğ³Ñ€Ñ‹ |
| `GET` | `/api/game/:id` | ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ğ± Ğ¸Ğ³Ñ€Ğµ |
| `POST` | `/api/game/:id/join` | ĞŸÑ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğº Ğ¸Ğ³Ñ€Ğµ |
| `POST` | `/api/game/:id/vote` | Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| `POST` | `/api/game/:id/reveal` | Ğ Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ ĞºĞ°Ñ€Ñ‚ |
| `POST` | `/api/game/:id/reset` | Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ² |

### WebSocket Events

| Event | Direction | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|-----------|----------|
| `join` | Client â†’ Server | ĞŸÑ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğº ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ |
| `vote` | Client â†’ Server | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ³Ğ¾Ğ»Ğ¾ÑĞ° |
| `reveal` | Client â†’ Server | Ğ Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ ĞºĞ°Ñ€Ñ‚ |
| `reset` | Client â†’ Server | Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ² |
| `gameUpdate` | Server â†’ Clients | ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ¸Ğ³Ñ€Ñ‹ |
| `playerJoined` | Server â†’ Clients | ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¿Ñ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½Ğ¸Ğ»ÑÑ |
| `voteReceived` | Server â†’ Clients | ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½ Ğ³Ğ¾Ğ»Ğ¾Ñ |

---

## ğŸ’¾ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¡Ñ…ĞµĞ¼Ğ° (ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ğ°Ñ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Game                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String (UUID)              â”‚
â”‚  name: String                   â”‚
â”‚  votingSystem: String           â”‚
â”‚  revealed: Boolean              â”‚
â”‚  createdAt: DateTime            â”‚
â”‚  updatedAt: DateTime            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 1:N
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Player                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String (UUID)              â”‚
â”‚  name: String                   â”‚
â”‚  gameId: String                 â”‚
â”‚  role: String                   â”‚
â”‚  createdAt: DateTime            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 1:N
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vote                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String (UUID)              â”‚
â”‚  playerId: String               â”‚
â”‚  gameId: String                 â”‚
â”‚  value: String                  â”‚
â”‚  createdAt: DateTime            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ²

```
Development:
  .env files (Ğ½Ğµ Ğ² git) â”€â”€â–º Application
  
Production:
  Environment Variables â”€â”€â–º PM2 â”€â”€â–º Application
  Ğ¸Ğ»Ğ¸
  .env files â”€â”€â–º Docker â”€â”€â–º Application
```

### CORS ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```
Backend (main.ts)
    â”‚
    â”œâ”€â–º ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° origin
    â”‚   â”‚
    â”‚   â”œâ”€â–º localhost:3001 (dev) âœ“
    â”‚   â”œâ”€â–º pokerscrum.ru (prod) âœ“
    â”‚   â””â”€â–º other origins âœ—
    â”‚
    â””â”€â–º credentials: true
```

---

## ğŸš€ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸

### PM2 (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)

```
Source Code
    â”‚
    â”œâ”€â–º npm install
    â”œâ”€â–º npm run build:prod
    â”‚
    â–¼
Compiled Code
    â”‚
    â”œâ”€â–º PM2 Cluster Mode
    â”‚   â”‚
    â”‚   â”œâ”€â–º Instance 1
    â”‚   â”œâ”€â–º Instance 2
    â”‚   â””â”€â–º Instance N
    â”‚
    â””â”€â–º Nginx Reverse Proxy
        â”‚
        â””â”€â–º Internet
```

### Docker

```
Source Code + Dockerfile
    â”‚
    â”œâ”€â–º docker build
    â”‚
    â–¼
Docker Image
    â”‚
    â”œâ”€â–º docker-compose up
    â”‚
    â–¼
Running Containers
    â”‚
    â”œâ”€â–º Frontend Container
    â”œâ”€â–º Backend Container
    â””â”€â–º MySQL Container
```

---

## ğŸ”„ CI/CD Flow (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğ¹)

```
Developer
    â”‚
    â”œâ”€â–º git push origin main
    â”‚
    â–¼
Git Repository
    â”‚
    â”œâ”€â–º Trigger CI/CD
    â”‚
    â–¼
CI Server (GitHub Actions / GitLab CI)
    â”‚
    â”œâ”€â–º Run tests
    â”œâ”€â–º Build applications
    â”œâ”€â–º Run linters
    â”‚
    â–¼
Deploy Server
    â”‚
    â”œâ”€â–º Pull latest code
    â”œâ”€â–º npm install
    â”œâ”€â–º npm run build:prod
    â”œâ”€â–º Run migrations
    â”œâ”€â–º pm2 reload all
    â”‚
    â–¼
Production (0-downtime)
```

---

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### PM2 Monitoring

```
PM2 Process Manager
    â”‚
    â”œâ”€â–º CPU Usage
    â”œâ”€â–º Memory Usage
    â”œâ”€â–º Restart Count
    â”œâ”€â–º Uptime
    â”‚
    â””â”€â–º Logs
        â”‚
        â”œâ”€â–º backend/logs/backend-out.log
        â”œâ”€â–º backend/logs/backend-error.log
        â”œâ”€â–º frontend/logs/frontend-out.log
        â””â”€â–º frontend/logs/frontend-error.log
```

---

## ğŸ”§ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

### Frontend
- **Framework:** Nuxt 4 (Vue 3)
- **State Management:** Pinia
- **Styling:** SCSS
- **Build Tool:** Vite (Ñ‡ĞµÑ€ĞµĞ· Nuxt)
- **SSR:** Enabled

### Backend
- **Framework:** NestJS
- **ORM:** Prisma
- **Database:** MySQL
- **WebSocket:** ws
- **Session:** express-session
- **Validation:** class-validator

### DevOps
- **Process Manager:** PM2
- **Reverse Proxy:** Nginx
- **Containerization:** Docker
- **Container Orchestration:** Docker Compose

---

## ğŸ“ˆ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ“Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ (PM2)

```
PM2 Cluster Mode
    â”‚
    â”œâ”€â–º Instance 1 (CPU Core 1)
    â”œâ”€â–º Instance 2 (CPU Core 2)
    â”œâ”€â–º Instance 3 (CPU Core 3)
    â””â”€â–º Instance N (CPU Core N)
        â”‚
        â””â”€â–º Load Balancer (Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹)
```

### Ğ’ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ

```
Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² ÑĞµÑ€Ğ²ĞµÑ€Ğ°
    â”‚
    â”œâ”€â–º Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ CPU â”€â”€â–º Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ PM2 Ğ¸Ğ½ÑÑ‚Ğ°Ğ½ÑĞ¾Ğ²
    â”œâ”€â–º Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ RAM â”€â”€â–º Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¸Ğ¹ ĞºĞµÑˆ
    â””â”€â–º Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ SSD â”€â”€â–º Ğ‘Ñ‹ÑÑ‚Ñ€ĞµĞµ DB
```

---

## ğŸ¯ Ğ›ÑƒÑ‡ÑˆĞ¸Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸

### Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½ÑƒÑ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (.env Ñ localhost)
- âœ… Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°Ğ¹Ñ‚Ğµ backend Ğ¸ frontend Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ hot-reload Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
- âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞ¹Ñ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸

### Production
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ PM2 cluster mode
- âœ… ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿ÑƒÑĞº (pm2 startup)
- âœ… ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ¸ Ñ€ĞµÑÑƒÑ€ÑÑ‹
- âœ… Ğ”ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ±ÑĞºĞ°Ğ¿Ñ‹ Ğ‘Ğ”
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ 0-downtime reload

### Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ
- âœ… ĞĞ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ÑŒÑ‚Ğµ .env Ñ„Ğ°Ğ¹Ğ»Ñ‹
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ ÑĞµĞºÑ€ĞµÑ‚Ñ‹ Ğ´Ğ»Ñ JWT
- âœ… ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ CORS Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ HTTPS Ğ² production
- âœ… ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞ¹Ñ‚Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾

---

## ğŸ“š Ğ¡Ğ¼. Ñ‚Ğ°ĞºĞ¶Ğµ

- [README.md](README.md) - Ğ³Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
- [CONFIGURATION_GUIDE.md](CONFIGURATION_GUIDE.md) - ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
- [PM2_DEPLOYMENT.md](PM2_DEPLOYMENT.md) - Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ñ‡ĞµÑ€ĞµĞ· PM2
- [DOCUMENTATION_INDEX.md](DOCUMENTATION_INDEX.md) - Ğ¸Ğ½Ğ´ĞµĞºÑ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸
